#!/bin/bash
# Karen - Server Configuration Management Tool
# https://github.com/magicoli/karen

KAREN_DIR=$(dirname $(realpath $BASH_SOURCE))

# Get script directory and load helper functions
. $(dirname $(realpath $0))/app/helpers/init


## DEBUG translations

# Main command dispatcher
case "${1:-}" in
    help|--help)
        _ "Karen - Server Configuration Management Tool"
        echo
        usage
        detailed_help
        ;;
    php)
        exec "$KAREN_BIN/setup-php" "${@:2}"
        ;;
    caddy)
        exec "$KAREN_BIN/generate-caddy-pools" "${@:2}"
        ;;
    apache)
        exec "$KAREN_BIN/setup-apache-optimization.sh" "${@:2}"
        ;;
    i18n)
        i18n "${@:2}"
        ;;
    --version)
        echo "$PGM $PGM_VERSION"
        echo "https://github.com/magicoli/karen"
        ;;
    "")
        log 0 "$(system_message error_command_missing)
$(usage)"
        end
        ;;
    *)
        end 1 "'$1' $(system_message error_command_unknown)
        
$(usage)"
        ;;
esac
