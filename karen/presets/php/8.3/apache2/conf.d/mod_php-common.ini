
# Common mod_php optimizations for all environments
# Conservative defaults for low-demand websites - override via .user.ini for high-demand sites
# More conservative than PHP-FPM due to shared Apache process

# OPcache base configuration
opcache.enable=1
opcache.interned_strings_buffer=16
opcache.max_wasted_percentage=5

# JIT optimizations (conservative for shared Apache process)
opcache.jit_buffer_size=32M
opcache.jit=1255

# Memory and execution limits (conservative for shared Apache process)
memory_limit=128M
max_execution_time=30
max_input_time=30
max_input_vars=1000

# File upload settings
post_max_size=32M
upload_max_filesize=32M
file_uploads=On
max_file_uploads=20

# Session optimizations
session.save_handler=files
session.save_path="/tmp"
session.gc_probability=1
session.gc_divisor=1000
session.gc_maxlifetime=1440

# Realpath cache (reduces filesystem calls)
realpath_cache_size=2M
realpath_cache_ttl=120

; Error handling - mod_php-common shows errors
php_admin_value[log_errors] = 1
php_admin_value[error_reporting] = E_ALL
php_admin_value[display_errors] = stderr
php_admin_value[display_startup_errors] = 1
php_admin_value[error_log] = /var/log/php/mod_php-common.error.log
slowlog = /var/log/php/mod_php-common.slowlog.log

