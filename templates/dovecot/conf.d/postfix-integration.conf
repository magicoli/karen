# Postfix-Dovecot integration configuration
# Place in: /etc/dovecot/conf.d/postfix-integration.conf
# Essential for mail delivery from Postfix to Dovecot

# Enable LMTP protocol for mail delivery
protocols = $protocols lmtp

# Postfix SASL authentication integration
service auth {
  unix_listener /var/spool/postfix/private/auth {
    group = postfix
    mode = 0666
    user = postfix
  }
}

# LMTP service for Postfix mail delivery
service lmtp {
  unix_listener /var/spool/postfix/private/dovecot-lmtp {
    group = postfix
    mode = 0666
    user = postfix
  }
}

# LMTP protocol settings
protocol lmtp {
  # Enable sieve processing during LMTP delivery
  mail_plugins = $mail_plugins sieve
  
  # Postmaster address for LMTP bounces
  postmaster_address = postmaster@HOSTNAME
}
