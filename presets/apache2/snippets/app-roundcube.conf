# Roundcube webmail-specific configuration snippet for Apache
# Usage: IncludeOptional $KAREN_ETC/apache2/snippets/roundcube.conf
# Requires: mod_rewrite

<IfModule mod_rewrite.c>
  RewriteEngine On
  
  # Block access to sensitive directories
  RewriteRule ^config/.* - [F,L]
  RewriteRule ^temp/.* - [F,L] 
  RewriteRule ^logs/.* - [F,L]
  RewriteRule ^SQL/.* - [F,L]
  RewriteRule ^bin/.* - [F,L]
</IfModule>

# Security for Roundcube
<Files "*.inc">
  Require all denied
</Files>

<Files "*.conf">
  Require all denied
</Files>

<Directory "*/config/*">
  Require all denied
</Directory>

<Directory "*/temp/*">
  Require all denied
</Directory>

<Directory "*/logs/*">
  Require all denied
</Directory>

<Directory "*/SQL/*">
  Require all denied
</Directory>

<Directory "*/bin/*">
  Require all denied
</Directory>

# Performance optimization for Roundcube
<IfModule mod_expires.c>
  # Cache static resources longer for Roundcube
  <Directory "*/skins/*">
    ExpiresActive On
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
  </Directory>
</IfModule>
