# High-performance PHP optimizations for single-site server

# OPcache optimizations
opcache.enable=1
opcache.memory_consumption=512M
opcache.max_accelerated_files=100000
opcache.validate_timestamps=0
opcache.save_comments=0
opcache.fast_shutdown=1
opcache.revalidate_freq=0
opcache.interned_strings_buffer=64
opcache.max_wasted_percentage=5

# JIT optimizations (PHP 8.0+)
opcache.jit_buffer_size=256M
opcache.jit=1255

# Memory and execution limits
memory_limit=512M
max_execution_time=60
max_input_time=60
max_input_vars=5000

# File upload settings
post_max_size=100M
upload_max_filesize=100M
file_uploads=On
max_file_uploads=20

# Session optimizations
session.save_handler=files
session.save_path="/tmp"
session.gc_probability=1
session.gc_divisor=1000
session.gc_maxlifetime=1440

# Realpath cache (reduces filesystem calls)
realpath_cache_size=4M
realpath_cache_ttl=120

# Disable unused extensions for better performance
; Uncomment if not needed
; extension=calendar
; extension=exif
; extension=shmop
; extension=sysvmsg
; extension=sysvsem
; extension=sysvshm
